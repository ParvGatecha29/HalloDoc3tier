@model HalloDocDAL.Model.Payrate

<div class="row justify-content-center mb-5 pb-5">
    <div class="row m-4 col-xl-8 col-md-9 col-11">
        <p class="col fs-4 fw-bold pb-0 mb-0 d-inline">PayRate</p>
        <div class="col mb-0 text-end">
            <button class="float-end my-4 btn btn-outline-info backBtn" onclick="location.href='@Url.Action("Provider","AdminDashboard")'">
                <svg xmlns="http://www.w3.org/2000/svg" width="16"
                     height="16" fill="currentColor" class="bi bi-chevron-left fw-medium mb-1" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
                </svg>Back
            </button>
        </div>
    </div>

    <div class="m-4 shadow col-xl-8 col-md-9 col-11">
        <table class="table">
            <thead>
                <tr class="d-none d-xl-table-row d-md-table-row">
                    <th scope="col" class="bg-secondary-subtle align-middle text-center fw-semibold"> <p>Category</p> </th>
                    <th scope="col" class="bg-secondary-subtle align-middle text-center fw-semibold"> <p>Payrate</p> </th>
                    <th scope="col" class="bg-secondary-subtle align-middle text-center fw-semibold"> <p>Action</p> </th>
                </tr>
            </thead>

            <tbody id="tableBody">
                <tr>
                    <td class="align-middle text-center"> NightShift_Weekend </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="NightShiftWeekend" placeholder="Payrate" asp-for="NightShiftWeekend">
                            <label for="NightShiftWeekend" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.NightShiftWeekend == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(1)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(1)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> Shift </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="Shift" placeholder="Payrate" asp-for="Shift">
                            <label for="Shift" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.Shift == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(2)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(2)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> HouseCalls_Night_Weekend </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="HouseCallsNightWeekend" placeholder="Payrate" asp-for="HouseCallsNightWeekend">
                            <label for="HouseCallsNightWeekend" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.HouseCallsNightWeekend == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(3)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(3)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> PhoneConsults </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="PhoneConsults" placeholder="Payrate" asp-for="PhoneConsults">
                            <label for="PhoneConsults" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.PhoneConsults == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(4)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(4)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> PhoneConsults_Night_Weekend </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="PhoneConsultsNightWeekend" placeholder="Payrate" asp-for="PhoneConsultsNightWeekend">
                            <label for="PhoneConsultsNightWeekend" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.PhoneConsultsNightWeekend == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(5)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(5)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> BatchTesting </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="BatchTesting" placeholder="Payrate" asp-for="BatchTesting">
                            <label for="BatchTesting" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.BatchTesting == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(6)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(6)">Edit</button>
                        }
                    </td>
                </tr>

                <tr>
                    <td class="align-middle text-center"> HouseCalls </td>
                    <td class="align-middle text-center">
                        <div class="form-floating">
                            <input type="number" class="form-control" id="HouseCalls" placeholder="Payrate" asp-for="HouseCalls">
                            <label for="HouseCalls" class="floatingLabel">Payrate</label>
                        </div>
                    </td>
                    <td class="align-middle text-center">
                        @if (Model.HouseCalls == 0)
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(7)">Save</button>
                        }
                        else
                        {
                            <button type="button" class="btn btn-info text-light" onclick="SavePayrate(7)">Edit</button>
                        }
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    function SavePayrate(type) {
        var rate = 0;
        switch (type) {
            case 1:
                rate = $('#NightShiftWeekend').val();
                break;
            case 2:
                rate = $('#Shift').val();
                break;
            case 3:
                rate = $('#HouseCallsNightWeekend').val();
                break;
            case 4:
                rate = $('#PhoneConsults').val();
                break;
            case 5:
                rate = $('#PhoneConsultsNightWeekend').val();
                break;
            case 6:
                rate = $('#BatchTesting').val();
                break;
            case 7:
                rate = $('#HouseCalls').val();
                break;
        }

        if (rate == 0) {
            Swal.fire({
                title: "Error",
                text: "Please enter valid data",
                icon: "Error",
                showConfirmButton: false,
                timer: 1500
            })
        }
        else {
            var physicianid = @Model.Physicianid;
            $.ajax({
                url: '/AdminDashboard/SavePayrate',
                type: 'POST',
                data: { Physicianid: physicianid, rate: rate, type: type },
                success: function (result) {
                    if (result.success) {
                        // LoadPayrate(physicianid, 'Model.currentView');
                        Swal.fire({
                            title: "Good job!",
                            text: "Details Updated",
                            icon: "success",
                            showConfirmButton: false,
                            timer: 1500
                        })
                    }
                }
            });
        }
    }
</script>
